<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ö° Tool T√†i X·ªâu MD5 - H·ªá Th·ªëng VIP - ƒê·ªô Ki·∫øp</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #007bff;
            --expert-color: #ffc107;
            --master-color: #dc3545;
            --dokiep-color: #9c27b0; /* T√≠m - ƒê·ªô Ki·∫øp */
            --bg-color: #f4f6f9;
            --card-bg: #ffffff;
            --text-color: #333;
            --border-radius: 8px;
            --shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: var(--text-color);
        }

        /* ‚ö†Ô∏è Style t·ª´ ƒëo·∫°n m√£ ƒë·∫ßu ti√™n, ghi ƒë√®/b·ªï sung cho body ƒë·ªÉ h·ªó tr·ª£ tab ƒê·ªô Ki·∫øp */
        .tab-content[data-tab="dokiep"] {
            /* Thay ƒë·ªïi background cho ri√™ng tab ƒê·ªô Ki·∫øp ƒë·ªÉ gi·ªëng giao di·ªán g·ªëc */
            background: #0f0f0f;
            color: white;
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin: -20px 0; /* ƒê·∫©y ra ƒë·ªÉ l·∫•p ƒë·∫ßy tab-content padding */
        }
        .tab-content[data-tab="dokiep"] input {
            background: #1b1b1b;
            color: #fff;
            border: 1px solid #333;
        }
        .tab-content[data-tab="dokiep"] button.predict-btn {
            background: #00eaff;
            font-weight: bold;
            color: black;
        }
        .tab-content[data-tab="dokiep"] button.predict-btn:hover {
             background: #00c9e6;
        }
        /* Style cho Header Tool T√†i X·ªâu (ch·ªâ hi·ªÉn th·ªã trong tab) */
        .dokiep-header {
            background: #111;
            padding: 15px;
            text-align: center;
            font-size: 22px;
            font-weight: bold;
            color: #00eaff;
            margin: -20px -20px 20px -20px;
            border-top-left-radius: var(--border-radius);
            border-top-right-radius: var(--border-radius);
        }
        /* RNG DICE ANIMATION */
        @keyframes spinDice {
            0% { transform: rotate(0deg); opacity:0.3; }
            50% { transform: rotate(180deg); opacity:1; }
            100% { transform: rotate(360deg); opacity:0.3; }
        }
        #rng-dice span {
            display:inline-block;
            animation: spinDice 0.2s linear infinite;
            font-size: 55px;
            margin: 0 10px;
        }

        /* K·∫øt qu·∫£ ƒê·ªô Ki·∫øp (Style g·ªëc) */
        #result-dokiep-v2 {
            margin-top: 20px;
            padding: 15px;
            background: #1a1a1a;
            border-radius: 6px;
            text-align: left;
            color: white; /* ƒê·∫£m b·∫£o m√†u tr·∫Øng */
        }

        /* -------------------------- */
        
        .container {
            background: var(--card-bg);
            padding: 30px;
            width: 100%;
            max-width: 650px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            text-align: center;
        }

        h2 {
            font-weight: 900;
            color: var(--dokiep-color);
            margin-bottom: 25px;
        }

        /* --- Tabs Navigation --- */
        .tabs {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            border-bottom: 2px solid #eee;
            overflow-x: auto;
        }

        .tab-button {
            flex-shrink: 0;
            padding: 12px 10px;
            border: none;
            background: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 700;
            color: #777;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab-button.active { color: var(--primary-color); border-bottom: 3px solid var(--primary-color); }
        .tab-button[data-tab="expert"].active { color: var(--expert-color); border-bottom: 3px solid var(--expert-color); }
        .tab-button[data-tab="master"].active { color: var(--master-color); border-bottom: 3px solid var(--master-color); }
        .tab-button[data-tab="dokiep"].active { color: var(--dokiep-color); border-bottom: 3px solid var(--dokiep-color); }
        
        .tab-content { padding: 20px 0; text-align: left; }

        /* --- Form Elements --- */
        input[type="text"], input[type="number"], input[type="file"], .dokiep-grid input {
            width: 100%;
            padding: 12px 15px;
            font-size: 16px;
            margin: 10px 0 15px 0;
            border-radius: 5px;
            border: 1px solid #ddd;
            box-sizing: border-box;
            transition: border-color 0.3s;
        }
        
        .dokiep-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .dokiep-grid input { margin: 0; }

        button.predict-btn {
            width: 100%;
            padding: 15px 20px;
            border: none;
            border-radius: 5px;
            background-color: var(--primary-color);
            color: white;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .tab-content[data-tab="dokiep"] button.predict-btn { background-color: #00eaff; color: black; } /* Style m·ªõi */
        .tab-content[data-tab="dokiep"] button.predict-btn:hover { background-color: #00c9e6; } /* Style m·ªõi */
        .tab-content[data-tab="expert"] button.predict-btn { background-color: var(--expert-color); }
        .tab-content[data-tab="expert"] button.predict-btn:hover { background-color: #d69900; }
        .tab-content[data-tab="master"] button.predict-btn { background-color: var(--master-color); }
        .tab-content[data-tab="master"] button.predict-btn:hover { background-color: #c82333; }

        .hidden { display: none !important; }

        /* --- Result Display --- */
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            font-size: 17px;
            font-weight: 700;
            text-align: center;
        }
        
        .result h5 { margin-top: 0; font-size: 1.1em; }
        .result .prediction-value { font-size: 2.2em; font-weight: 900; }
        .result .detail-line { font-weight: 400; font-size: 0.9em; margin-top: 5px; }

        #result-simple { background: #e7f5ff; border: 1px solid #cce5ff; color: var(--primary-color); }
        #result-expert { background: #fff3cd; border: 1px solid #ffeeba; color: var(--expert-color); }
        #result-master { background: #f8d7da; border: 1px solid #f5c6cb; color: var(--master-color); }
        /* X√≥a style c≈© c·ªßa #result-dokiep ƒë·ªÉ d√πng #result-dokiep-v2 m·ªõi */
        /* #result-dokiep { 
            background: #f3e5f5; 
            border: 2px solid var(--dokiep-color); 
            color: var(--dokiep-color); 
        } */

        .confidence-bar {
            width: 80%;
            height: 20px;
            margin: 10px auto;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }

        .confidence-level {
            height: 100%;
            background-color: var(--dokiep-color);
            transition: width 1s ease-out;
            text-align: center;
            line-height: 20px;
            color: white;
            font-size: 12px;
        }

        .footer { margin-top: 20px; color: #999; font-size: 12px; }
    </style>
</head>
<body>

<div class="container" id="license-container">
    <h2>üîê K√çCH HO·∫†T B·∫¢N QUY·ªÄN</h2>
    <input type="text" id="license-key" placeholder="Nh·∫≠p KEY k√≠ch ho·∫°t...">
    <button class="predict-btn" onclick="verifyKey()">M·ªü kh√≥a Tool</button>
    <div id="license-msg" class="result hidden"></div>
</div>

<div class="container hidden" id="main-tool">
    <h2>üëë H·ªÜ TH·ªêNG PH√ÇN T√çCH ƒê·ªò KI·∫æP V.AI</h2>

    <div class="tabs">
        <button class="tab-button" data-tab="simple" onclick="showTab('simple')">ƒê∆°n Gi·∫£n</button>
        <button class="tab-button" data-tab="expert" onclick="showTab('expert')">Chuy√™n Gia</button>
        <button class="tab-button" data-tab="master" onclick="showTab('master')">B·∫≠c Th·∫ßy</button>
        <button class="tab-button active" data-tab="dokiep" onclick="showTab('dokiep')">ƒê·ªò KI·∫æP</button>
    </div>

    <div class="tab-content hidden" id="tab-simple" data-tab="simple">
        <p>Ph√¢n t√≠ch t·ª∑ l·ªá c∆° b·∫£n d·ª±a tr√™n MD5 Hash.</p>
        <input type="text" id="simple-input" placeholder="Nh·∫≠p M√£ Phi√™n ho·∫∑c M√£ MD5...">
        <button class="predict-btn" onclick="predictSimple()">D·ª± ƒêo√°n ƒê∆°n Gi·∫£n</button>
        <div id="result-simple" class="result hidden"></div>
    </div>

    <div class="tab-content hidden" id="tab-expert" data-tab="expert">
        <p style="color: var(--expert-color);">Ph√¢n t√≠ch n√¢ng cao: Ph√°t hi·ªán ƒëi·ªÉm r∆°i v√† bi·∫øn ƒë·ªông Hash.</p>
        <input type="text" id="expert-input-maphien" placeholder="Nh·∫≠p M√£ Phi√™n...">
        <input type="text" id="expert-input-sophan" placeholder="Nh·∫≠p s·ªë phi√™n ƒë√£ ch∆°i (V√≠ d·ª•: 5-10)">
        <button class="predict-btn" onclick="predictExpert()">Ph√¢n T√≠ch Chuy√™n Gia</button>
        <div id="result-expert" class="result hidden"></div>
    </div>

    <div class="tab-content hidden" id="tab-master" data-tab="master">
        <p style="color: var(--master-color);">Ph√¢n t√≠ch t·ªëi th∆∞·ª£ng: D·ª± ƒëo√°n ch√≠nh x√°c k·∫øt qu·∫£ T√†i/X·ªâu.</p>
        <input type="text" id="master-input-maphien" placeholder="Nh·∫≠p M√£ Phi√™n...">
        <input type="text" id="master-input-cuoc" placeholder="Nh·∫≠p s·ªë ti·ªÅn c∆∞·ª£c d·ª± ki·∫øn (V√≠ d·ª•: 100k - 500k)">
        <button class="predict-btn" onclick="predictMaster()">D·ª± ƒêo√°n B·∫≠c Th·∫ßy</button>
        <div id="result-master" class="result hidden"></div>
    </div>

    <div class="tab-content" id="tab-dokiep" data-tab="dokiep">
        <div class="dokiep-header">üîÆ TOOL T√ÄI X·ªàU ‚Äì GEMINI AI + RNG</div>

        <div class="dokiep-container" style="padding: 0 20px;"> 
            <h3 style="margin-top:0;">üîë Nh·∫≠p KEY Gemini AI</h3>
            <input type="text" id="dk-gemini-key" placeholder="Nh·∫≠p Gemini API Key...">

            <h3>üìå Th√¥ng Tin Phi√™n</h3>
            <input type="text" id="dk-maphien-v2" placeholder="M√£ phi√™n (b·∫Øt bu·ªôc)">
            <input type="text" id="dk-md5-v2" placeholder="M√£ MD5">
            <input type="text" id="dk-history-v2" placeholder="L·ªãch s·ª≠ TTTX (kh√¥ng b·∫Øt bu·ªôc)">
            <input type="number" id="dk-bet-v2" placeholder="S·ªë ti·ªÅn c∆∞·ª£c">

            <h3>üé≤ Nh·∫≠p 3 X√∫c X·∫Øc Phi√™n Tr∆∞·ªõc</h3>
            <input type="number" id="dk-d1" placeholder="X√∫c x·∫Øc 1 (1-6)">
            <input type="number" id="dk-d2" placeholder="X√∫c x·∫Øc 2 (1-6)">
            <input type="number" id="dk-d3" placeholder="X√∫c x·∫Øc 3 (1-6)">

            <h3>üñº ·∫¢nh phi√™n (t√πy ch·ªçn)</h3>
            <input type="file" id="dk-image-v2" accept="image/*">

            <button class="predict-btn" onclick="predictDokiepV2()">PH√ÇN T√çCH NGAY</button>

            <div id="rng-box" class="hidden" style="text-align:center; margin-top:25px;">
                <div style="font-weight:700; margin-bottom:10px; font-size:18px;">üé≤ RNG ‚Äì M√¥ ph·ªèng x√∫c x·∫Øc:</div>
                <div id="rng-dice"></div>
            </div>

            <div id="result-dokiep-v2" class="result hidden"></div> 
        </div>
        </div>
    

    <div class="footer">
        ‚ö° H·ªá th·ªëng MD5 V.AI | C·∫•p ƒë·ªô ƒê·ªô Ki·∫øp
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.19.0/js/md5.min.js"></script>

<script>
    // KEY h·ª£p l·ªá
    const validKeys = ["DUCHUY123", "VIP2025", "KEYTAIXIU", "PRO999", "DOKIEP999"];

    // --- Ch·ª©c nƒÉng chuy·ªÉn Tab ---
    function showTab(tabName) {
        document.querySelectorAll('.tab-content').forEach(content => {
            content.classList.add('hidden');
        });
        document.getElementById(`tab-${tabName}`).classList.remove('hidden');

        document.querySelectorAll('.tab-button').forEach(button => {
            button.classList.remove('active');
        });
        document.querySelector(`.tab-button[data-tab="${tabName}"]`).classList.add('active');
    }

    // --- Ch·ª©c nƒÉng K√≠ch ho·∫°t KEY ---
    function verifyKey() {
        const inputKey = document.getElementById("license-key").value.trim();
        const msg = document.getElementById("license-msg");
        msg.classList.remove("hidden");

        if (validKeys.includes(inputKey)) {
            msg.innerHTML = "‚úÖ K√≠ch ho·∫°t th√†nh c√¥ng! Chu·∫©n b·ªã ƒê·ªô Ki·∫øp...";
            msg.style.backgroundColor = "#d4edda";
            msg.style.color = "#155724";
            setTimeout(() => {
                document.getElementById("license-container").classList.add("hidden");
                document.getElementById("main-tool").classList.remove("hidden");
                // M·ªü tab ƒê·ªô Ki·∫øp sau khi k√≠ch ho·∫°t th√†nh c√¥ng
                showTab('dokiep'); 
            }, 800);
        } else {
            msg.innerHTML = "‚ùå KEY kh√¥ng h·ª£p l·ªá! Vui l√≤ng ki·ªÉm tra l·∫°i.";
            msg.style.backgroundColor = "#f8d7da";
            msg.style.color = "#721c24";
        }
    }

    // H√†m t√≠nh MD5 v√† Modulo (Core Logic)
    function calculatePredictionValue(input) {
        if (typeof md5 !== 'function') return { value: 50, hash: 'MD5_ERROR' };
        let hash = input;
        if (!/^[0-9a-f]{32}$/.test(input.toLowerCase())) {
            hash = md5(input);
        }
        const value = parseInt(hash.substring(0, 8), 16) % 100;
        return { value: value, hash: hash };
    }


    // --- 1. D·ª± ƒêo√°n ƒê∆°n Gi·∫£n ---
    function predictSimple() {
        const input = document.getElementById("simple-input").value.trim();
        const result = document.getElementById("result-simple");
        result.classList.remove("hidden");

        if (!input) {
            result.innerHTML = "‚ùå Vui l√≤ng nh·∫≠p M√£ Phi√™n ho·∫∑c M√£ MD5!";
            result.style.backgroundColor = "#f8d7da";
            result.style.color = "#721c24";
            return;
        }

        const { value, hash } = calculatePredictionValue(input);
        const tai = value;
        const xiu = 100 - value;

        const prediction = (tai > xiu) ? 'T√ÄI' : 'X·ªàU';
        const highPercentage = Math.max(tai, xiu);

        result.innerHTML = `
        <h5>üéØ D·ª∞ ƒêO√ÅN ƒê∆†N GI·∫¢N</h5>
        <p class="prediction-value" style="color: ${prediction === 'T√ÄI' ? '#007bff' : '#0056b3'};">
            ${prediction} (${highPercentage}%)
        </p>
        <div class="detail-line">üîµ T√ÄI: ${tai}% | üü¢ X·ªàU: ${xiu}%</div>
        <div class="detail-line" style="margin-top: 10px;">Hash: ${hash.substring(0, 15)}...</div>
        `;
        result.style.backgroundColor = "#e7f5ff";
        result.style.color = 'var(--primary-color)';
    }

    // --- 2. D·ª± ƒêo√°n Chuy√™n Gia ---
    function predictExpert() {
        const maPhien = document.getElementById("expert-input-maphien").value.trim();
        const soPhien = document.getElementById("expert-input-sophan").value.trim();
        const result = document.getElementById("result-expert");
        result.classList.remove("hidden");

        if (!maPhien || !soPhien) {
            result.innerHTML = "‚ùå Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß M√£ Phi√™n v√† S·ªë phi√™n ƒë√£ ch∆°i!";
            result.style.backgroundColor = "#f8d7da";
            result.style.color = "#721c24";
            return;
        }
        
        const { value } = calculatePredictionValue(maPhien);
        const tai = value;
        const xiu = 100 - tai;

        const pseudoComplexity = (soPhien.length % 5) + 1; 
        let finalTai = Math.min(99, Math.max(1, tai + pseudoComplexity));
        let finalXiu = 100 - finalTai;

        const prediction = (finalTai > finalXiu) ? 'T√ÄI' : 'X·ªàU';
        const highPercentage = Math.max(finalTai, finalXiu);
        const trend = (finalTai > 55 && finalXiu < 45) ? '·ªîn ƒë·ªãnh TƒÉng' : (finalXiu > 55 && finalTai < 45) ? '·ªîn ƒë·ªãnh Gi·∫£m' : 'Bi·∫øn ƒë·ªông nh·∫π';

        result.innerHTML = `
        <h5 style="color: var(--expert-color);">üí° PH√ÇN T√çCH CHUY√äN GIA</h5>
        <p class="prediction-value" style="color: var(--expert-color);">
            ${prediction} (${highPercentage.toFixed(2)}%)
        </p>
        <div class="detail-line">üìà Xu h∆∞·ªõng: **${trend}** (ƒê√£ t√≠nh ${pseudoComplexity} ƒëi·ªÉm r∆°i)</div>
        <div class="detail-line" style="margin-top: 5px;">üîµ T√ÄI: ${finalTai.toFixed(2)}% | üü¢ X·ªàU: ${finalXiu.toFixed(2)}%</div>
        `;
        result.style.backgroundColor = "#fff3cd";
        result.style.color = "var(--expert-color)";
    }

    // --- 3. D·ª± ƒêo√°n B·∫≠c Th·∫ßy ---
    function predictMaster() {
        const maPhien = document.getElementById("master-input-maphien").value.trim();
        const soCuoc = document.getElementById("master-input-cuoc").value.trim();
        const result = document.getElementById("result-master");
        result.classList.remove("hidden");

        if (!maPhien || !soCuoc) {
            result.innerHTML = "‚ùå Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß M√£ Phi√™n v√† S·ªë ti·ªÅn c∆∞·ª£c d·ª± ki·∫øn!";
            result.style.backgroundColor = "#f8d7da";
            result.style.color = "#721c24";
            return;
        }
        
        const { value } = calculatePredictionValue(maPhien);
        let masterValue = value;

        const finalOutcome = (masterValue >= 50) ? 'T√ÄI' : 'X·ªàU';
        const confidence = (Math.abs(masterValue - 50) * 2) + 50; 
        const betSuggestion = (confidence > 80) ? 'T·∫§T TAY' : 'C∆Ø·ª¢C M·∫†NH';

        result.innerHTML = `
        <h5 style="color: var(--master-color);">üëë D·ª∞ ƒêO√ÅN B·∫¨C TH·∫¶Y</h5>
        <p class="prediction-value" style="color: var(--master-color);">
            K·∫æT QU·∫¢ CU·ªêI: **${finalOutcome}**
        </p>
        <div class="detail-line">T·ª∑ l·ªá T·ª± tin: **${confidence.toFixed(2)}%**</div>
        <div class="detail-line" style="margin-top: 5px;">‚ö° ƒê·ªÅ xu·∫•t c∆∞·ª£c: <span style="font-weight: 700;">${betSuggestion}</span></div>
        `;
        result.style.backgroundColor = "#f8d7da";
        result.style.color = "var(--master-color)";
    }

    // --- 4. D·ª± ƒêo√°n ƒê·ªò KI·∫æP (H√†m m·ªõi - ƒë√£ ƒë·ªïi t√™n ƒë·ªÉ tr√°nh xung ƒë·ªôt) ---
    /* RNG ‚Äì SIN SEED */
    function rngRoll(seed) {
        let rand = Math.sin(seed) * 10000;
        return Math.floor((rand - Math.floor(rand)) * 6) + 1;
    }
    const diceIcons = ["‚öÄ","‚öÅ","‚öÇ","‚öÉ","‚öÑ","‚öÖ"];

    async function predictDokiepV2() {

        // L·∫•y d·ªØ li·ªáu t·ª´ c√°c input V2 (ƒë√£ ƒë·ªïi ID)
        const maPhien = document.getElementById("dk-maphien-v2").value.trim();
        const md5Input = document.getElementById("dk-md5-v2").value.trim();
        const history = document.getElementById("dk-history-v2").value.trim().toUpperCase();
        const betAmount = document.getElementById("dk-bet-v2").value.trim();
        const geminiKey = document.getElementById("dk-gemini-key").value.trim();
        const imageFile = document.getElementById("dk-image-v2").files[0];

        const d1 = parseInt(document.getElementById("dk-d1").value);
        const d2 = parseInt(document.getElementById("dk-d2").value);
        const d3 = parseInt(document.getElementById("dk-d3").value);

        const result = document.getElementById("result-dokiep-v2");
        const rngBox = document.getElementById("rng-box");
        const rngDice = document.getElementById("rng-dice");

        result.classList.add("hidden");
        rngBox.classList.remove("hidden");
        result.innerHTML = ""; // X√≥a n·ªôi dung c≈©

        /* RNG ANIMATION START */
        rngDice.innerHTML = `<span>‚öÄ</span><span>‚öÅ</span><span>‚öÇ</span>`;
        await new Promise(res => setTimeout(res, 1500));

        /* RNG T√çNH THEO SEED */
        const seedBase = parseInt(maPhien.replace(/\D/g, "") || "1");
        // ƒê·∫£m b·∫£o d1, d2, d3 l√† s·ªë (n·∫øu l√† NaN th√¨ l√† 0)
        const seed = seedBase + (d1||0) + (d2||0) + (d3||0); 

        const r1 = rngRoll(seed);
        const r2 = rngRoll(seed + 11);
        const r3 = rngRoll(seed + 22);

        rngDice.innerHTML = `
            <span style="animation:none;">${diceIcons[r1-1]}</span>
            <span style="animation:none;">${diceIcons[r2-1]}</span>
            <span style="animation:none;">${diceIcons[r3-1]}</span>
        `;

        const rngTotal = r1 + r2 + r3;
        const rngFinal = rngTotal >= 11 ? "T√ÄI" : "X·ªàU";
        const rngColor = rngFinal === "T√ÄI" ? "#00eaff" : "#ff4500";


        /* GEMINI AI */
        let aiPredict = "Kh√¥ng c√≥ KEY Gemini. Ch·ªâ hi·ªÉn th·ªã RNG.";
        if (geminiKey) {

            // Chuy·ªÉn h√¨nh ·∫£nh th√†nh base64 n·∫øu c√≥ ƒë·ªÉ g·ª≠i l√™n API (ch∆∞a √°p d·ª•ng tr·ª±c ti·∫øp v√¨ c·∫ßn h√†m chuy·ªÉn base64)
            // Hi·ªán t·∫°i ch·ªâ th√™m prompt m√¥ t·∫£.

            let prompt = `
Ph√¢n t√≠ch t√†i x·ªâu:
- M√£ phi√™n: ${maPhien}
- MD5: ${md5Input}
- L·ªãch s·ª≠ TTTX: ${history}
- X√≠ ng·∫ßu phi√™n tr∆∞·ªõc: ${d1}, ${d2}, ${d3}
- Ti·ªÅn c∆∞·ª£c: ${betAmount}
- K·∫øt qu·∫£ RNG: ${rngTotal} (${rngFinal})

H√£y ƒë∆∞a ra d·ª± ƒëo√°n T√†i ho·∫∑c X·ªâu + t·ª∑ l·ªá t·ª± tin.
`;

            try {
                const resp = await fetch(
                    "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-latest:generateContent?key="+geminiKey,
                    {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: prompt }] }]
                        })
                    }
                );
                const data = await resp.json();
                aiPredict = data?.candidates?.[0]?.content?.parts?.[0]?.text || "AI kh√¥ng tr·∫£ l·ªùi. C√≥ th·ªÉ KEY kh√¥ng h·ª£p l·ªá.";
            } catch (e) {
                aiPredict = "L·ªói g·ªçi Gemini! Vui l√≤ng ki·ªÉm tra l·∫°i KEY API v√† k·∫øt n·ªëi.";
            }
        }

        /* SHOW RESULT */
        result.classList.remove("hidden");
        result.innerHTML = `
            <h3>üî• K·∫øt qu·∫£ ph√¢n t√≠ch ƒê·ªò KI·∫æP</h3>
            <div>üé≤ RNG: <b>${r1} - ${r2} - ${r3}</b> ‚Üí <b style="color:${rngColor}">${rngFinal}</b></div>
            <div style="margin-top:10px;">ü§ñ <b>Gemini AI:</b><br>${aiPredict}</div>
        `;
    }
</script>
</body>
</html>
