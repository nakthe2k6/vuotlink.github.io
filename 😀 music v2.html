<!DOCTYPE html>
<html lang="en">
<head>
    <title>Web Tools</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Web Tools - H·ªá th·ªëng tools online">
    <meta property="og:image" content="https://tool.shopdsgm.vn/view/assets/Web-Tools.png">
    <meta property="og:type" content="Web Tools">
    <meta property="og:title" content="Web Tools">
    <meta property="og:description" content="Web Tools - H·ªá th·ªëng tools online">
    <link rel="shortcut icon" href="https://tool.shopdsgm.vn/view/assets/Web-Tools.png" />
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github-gist.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="view/assets/css/style.css?v=1765124213" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>

<body>
<p class="m-3">IP c·ªßa b·∫°n: 2001:ee0:4a6f:91c0:210b:274b:1ca5:6188</p>

<div class="content"><div class="auto-container">
<div class="container">

    <form method="post" id="myForm">
        <h2>Tool Download Music SoundCloud</h2>
        <label class="customLabel" for="music">T√™n nh·∫°c:</label>
        <input type="text" id="music" name="music" placeholder="Nh·∫≠p t√™n nh·∫°c" required>
        <button type="submit">Download</button>
    </form>

    <div id="result_text"></div>

    <!-- ================================
         PLAYER PH√ÅT NH·∫†C T·ª∞ ƒê·ªòNG
    ================================= -->
    <div style="margin-top:25px">
        <h3>üéµ Tr√¨nh ph√°t nh·∫°c</h3>
        <input id="playLink" type="text" placeholder="D√°n link nh·∫°c v√†o ƒë√¢y r·ªìi b·∫•m Ph√°t" style="width:100%;padding:10px;margin-bottom:10px;">
        <button onclick="playMusic()" style="padding:8px 16px;">Ph√°t nh·∫°c</button>

        <div id="playerArea" style="margin-top:15px;"></div>
    </div>

</div></div></div>

<script src="view/assets/js/downloadSCL.js?v=1765124213"></script>

<script>
// === HANDLE PLAYER === //
function playMusic() {
    let url = document.getElementById("playLink").value.trim();
    if (!url) return alert("Nh·∫≠p link nh·∫°c tr∆∞·ªõc.");

    document.getElementById("playerArea").innerHTML = generatePlayer(url);
}

function generatePlayer(url) {

    // YouTube
    if (url.includes("youtube.com") || url.includes("youtu.be")) {
        let id = url.split("v=")[1] || url.split("/").pop();
        return `<iframe width="100%" height="200" src="https://www.youtube.com/embed/${id}" frameborder="0" allowfullscreen></iframe>`;
    }

    // SoundCloud
    if (url.includes("soundcloud.com")) {
        return `<iframe width="100%" height="200" scrolling="no" frameborder="no"
                src="https://w.soundcloud.com/player/?url=${encodeURIComponent(url)}"></iframe>`;
    }

    // Zing MP3 (nh√∫ng playable)
    if (url.includes("zingmp3.vn")) {
        return `<iframe width="100%" height="200" frameborder="0"
                src="https://zingmp3.vn/embed/song/${extractZingID(url)}"></iframe>`;
    }

    // File direct mp3/mp4
    if (url.endsWith(".mp3") || url.endsWith(".m4a") || url.endsWith(".mp4") || url.endsWith(".wav")) {
        return `<audio controls autoplay style="width:100%">
                    <source src="${url}">
                </audio>`;
    }

    return `<p>‚ùå Kh√¥ng h·ªó tr·ª£ link n√†y.</p>`;
}

function extractZingID(url) {
    return url.split("/").pop().replace(".html", "");
}

// =============================
//  T·ª∞ ƒê·ªòNG PH√ÅT NH·∫†C KHI DOWNLOAD TH√ÄNH C√îNG
// =============================
function autoPlayDownloaded(link) {
    document.getElementById("playLink").value = link;
    document.getElementById("playerArea").innerHTML = generatePlayer(link);
}

// Hook v√†o k·∫øt qu·∫£ c·ªßa tool download
let originalResultAppend = $("#result_text").html;
$("#result_text").html = function(content) {
    originalResultAppend.call(this, content);

    let match = String(content).match(/https?:\/\/[^"]+/);
    if (match) autoPlayDownloaded(match[0]);
};
</script>

</body>
</html>